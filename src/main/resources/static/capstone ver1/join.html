<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>GET-TOO 회원가입</title>

    <!-- Favicon -->
    <link rel="icon" href="img/core-img/favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style_join.css">
    <script src="js/jquery/jquery-2.2.4.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <!-- Preloader -->
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="lds-ellipsis">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    
    <!-- login area -->
    <section class="join_form">
        <h1> 회원가입 </h1>
        <form action="/client/join" method="POST">
            <div class="int-area">
                <input type="text" name="loginId" id="id" autocomplete="off" required  maxlength="20">
                <label for="id"> 아이디 </label>
                <button id="idbtn">중복 확인</button>
            </div>
            <div class="int-area">
                <input type="password" name="pw" id="pw" autocomplete="off" required minlength="7" maxlength="20">
                <label for="pw"> 비밀번호 (7자 이상)</label>
            </div>
                <div class="int-area">
                <input type="password" name="pwCheck" id="pwcheck" autocomplete="off" required  minlength="7" maxlength="20">
                <label for="pwcheck"> 비밀번호 확인 (7자 이상)</label>
            </div>
            <div class="int-area">
                <input type="text" class="datepicker" name="birthday" readonly="readonly" id="birthday" autocomplete="off" required style="cursor: pointer;">
                <label for="birthday"> 생년월일 </label>
            </div>
            <div class="int-area">
                <input type="email" name="email" id="email" autocomplete="off" required>
                <label for="email"> 이메일 </label>
            </div>
            <div class="int-area">
                <input name="cellphoneNo" type="text" id="cellphoneNo" maxlength="13" minlength="13" autocomplete="off" required>
                <label for="cellphoneNo"> 휴대폰 번호 ('-'포함 13자) </label>
            </div>
            <div class="int-radio">
                <div class="school"> 재학여부 </div>
                <label for="school1"><input type="radio" name="school" id="school1" value="ing"> 재학생 </label>
                <label for="school2"><input type="radio" name="school" id="school2" value="rest"> 휴학생 </label>
                <label for="school3"><input type="radio" name="school" id="school3" value="end"> 졸업생 </label>
            </div>
            <div class="int-area">
                <textarea name="message" id="message" rows="6" readonly> 포함되는 개인정보들은 모두 어쩌구 저쩌구에 이용될 예정이며 어쩌구 저쩌구 길게 하면 스크롤바가 생기는 지에 대한 테스트 입니다.<br>
                아무 말이나 적어보겠씁니다. 동아리 회원가입 동아리 로그인 동아리 찾아보기 동아리 가입ㅎ기 동아리 게시판 활ㄷ용 도 ㅇ아리 탈퇴 로그아웃 탈퇴 동아리 개설하기 동아리 설정하기 동아리 공지사항 사진 게시판 활용하기
                게시판 관리하기 회원 관리하기 동아리 설정 수정하기 동아리 삭제하기 동아리 기본 정보 관리하기 커버 이미지 동아리 소개 모집 여부 확인하기 동아리 이름 변경 신청
                스크롤바 생기는데 이제 스크롤바 디자인도 해야 돼요 ㅡㅡ
                </textarea>
                <label for="message"> 회원가입 이용약관 동의 </label>
            </div>
            <div class="int-area">
                <input type="checkbox" name="readcheck" id="readcheck">
                <label for="readcheck" class="read">
                    <span style="color: red; font-weight: 200; font-size: 15px;">[필수] </span><span style="color:#fff; font-weight: 200; font-size: 15px;"> 약관 및 개인정보 수집/이용 동의</span>
                </label>
            </div>
            <div class="btn-area">
                <button id="btn" type="submit"> 회원가입 </button>
            </div>
        </form>
    </section>

    <script>
        $.datepicker.setDefaults({
            dateFormat: 'yy-mm-dd',
            prevText: '이전 달',
            nextText: '다음 달',
            monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            dayNames: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
            showMonthAfterYear: true,
            yearSuffix: '년'
        });
        $(function(){
            $('.datepicker').datepicker();
        });
        let id = $('#id');
        let pw = $('#pw');
        let pwCheck = $('#pwCheck');
        let birthday = $('#birthday');
        let email = $('#email');
        let cellphoneNo = $('#cellphoneNo');
        let school = $('#school');
        let readcheck = $('#readcheck');
        let btn = $('#btn');

        $(btn).on('click', function() {
            if($(id).val() == "") {
                $(id).next('label').addClass('warning');
                setTimeout(function() {
                    $('label').removeClass('warning');
                },1500);
            }
            else if($(pw).val() == "") {
                $(pw).next('label').addClass('warning');
                setTimeout(function() {
                    $('label').removeClass('warning');
                },1500);
            }
        });

        $(function(){
            // 회원 가입 처리
            $('#join-submit').click(function(e){
                e.preventDefault();
                if($("#id").val() ==''){
                    alert('아이디를 입력하세요');
                    $("#id").focus();
                    return false;
                }

                var email = $('#email').val();
                if(email == ''){
                    alert('이메일을 입력하세요');
                    $("#email").focus();
                    return false;
                } else {
                    var emailRegex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                    if (!emailRegex.test(email)) {
                        alert('이메일 주소가 유효하지 않습니다. ex)abc@gmail.com');
                        $("#email").focus();
                        return false;
                    }
                }

                if($("#pw").val() ==''){
                    alert('비밀번호를 입력하세요');
                    $("#pw").focus();
                    return false;
                }

                if($("#pwCheck").val() ==''){
                    alert('비밀번호를 다시 한번 더 입력하세요');
                    $("#pwCheck").focus();
                    return false;
                }
                
                if($("#pw").val()!== $("#pwCheck").val()){
                    alert('비밀번호를 둘다 동일하게 입력하세요');
                    return false;
                }

                if($("#cellphoneNo").val() ==''){
                    alert('휴대폰 번호를 입력하세요');
                    $("#cellphoneNo").focus();
                    return false;
                }
                
                
                $.ajax({
                    url: 'register.php',
                    type: 'POST',
                    data: {
                        name:$("#name").val(),
                        userID:$('#id').val(),
                        email:$('#email').val(),
                        password:$('#pw').val(),
                        mobileNO:$("#cellphoneNo").val()
                    },
                    dataType: "json",
                    success: function (response) {
                        if(response.result == 1){
                            alert('가입 완료');
                            location.replace('../index.php'); // 화면 갱신
                        } else if(response.result == 0){
                            alert('이미 가입된 아이디입니다');
                        } else if(response.result == -2){
                            alert('입력된 값이 없습니다');
                        } else {
                            alert('등록중에 에러가 발생했습니다');
                        }
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        alert("arjax error : " + textStatus + "\n" + errorThrown);
                    }
                });
            });
        });
    </script>
</body>
</html>